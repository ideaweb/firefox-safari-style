/***************+**/
/* VERSION 0.2.73 */
/******************/

/* 
    Icons: resource:///chrome/browser/skin/classic/browser/ => chrome://browser/skin/
           resource://gre/chrome/toolkit/skin/classic/global/icons/ => chrome://global/skin/icons/arrow-left.svg
*/

@namespace xul url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

@namespace html url("http://www.w3.org/1999/xhtml");

$firefox-safari-style-show-favicons-in-tabs: true;
$firefox-safari-style-grayscale-favicons-in-tabs: false;
$firefox-safari-style-grayscale-extension-buttons-in-toolbar: false;
$firefox-safari-style-vibrancy: false;

/*****************/
/* DEFAULT THEME */
/*****************/

/***************/
/* LIGHT THEME */
/***************/

:root {
    --firefox-safari-style-attention-color: #0a84ff;
    --firefox-safari-style-outline-color: #73a6f1;

    --firefox-safari-style-controls-width: 75px;

    /* Default Background color */
    --firefox-safari-style-background-color-active: #fdfdfd;
    /* Background color for inactive windows */
    --firefox-safari-style-background-color-inactive: #f0f0f0;
    /* Background color for private windows */
    --firefox-safari-style-background-color-private: #838383;

    /* Border colors */
    --firefox-safari-style-title-border-color-active: rgba(0,0,0,0.15);
    --firefox-safari-style-title-border-color-inactive: var(--firefox-safari-style-title-border-color-active);

    /******************/
    /* NAVIGATION BAR */
    /******************/

    /* Max height of navigation bar */
    --firefox-safari-style-bar-height: 52px;

    /* Border colors */
    --firefox-safari-style-bar-border-color-active: rgba(0,0,0,0.05);
    --firefox-safari-style-bar-border-color-inactive: var(--firefox-safari-style-bar-border-color-active);


    /********/
    /* TABS */
    /********/

    /* Max height of a tab */
    --firefox-safari-style-tab-height: 28px;

    /* Default background color */
    --firefox-safari-style-tab-background-color-inactive: rgba(0,0,0,0.05);
    @if $firefox-safari-style-vibrancy != false {
        &:not(:-moz-window-inactive) {
            --firefox-safari-style-tab-background-color-inactive: rgba(0,0,0,0.075);
        }
    }
    /* Background active tab */
    --firefox-safari-style-tab-background-color-active: var(--firefox-safari-style-background-color-active);
    /* Button background hover on incative tab */
    --firefox-safari-style-tab-background-color-hover: rgba(0,0,0,0.1);
    /* Icon size of favicon, throbber, sound etc. */
    --firefox-safari-style-button-icon: 16px;

    /* Border colors */
    --firefox-safari-style-tab-border-color-active: rgba(0,0,0,0.1);
    --firefox-safari-style-tab-border-color-inactive: var(--firefox-safari-style-tab-border-color-active);
    --firefox-safari-style-tab-border-bottom-color-active: #d9d9d9;
    --firefox-safari-style-tab-border-bottom-color-inactive: var(--firefox-safari-style-tab-border-bottom-color-active);
    --firefox-safari-style-tab-border-left-color-active: rgba(0,0,0,0.15);
    --firefox-safari-style-tab-border-left-color-inactive: var(--firefox-safari-style-tab-border-left-color-active);
    --firefox-safari-style-tab-border-left-color-vibrance: rgba(0,0,0,0.1);

    @if $firefox-safari-style-vibrancy == tabs {
        --firefox-safari-style-tab-border-bottom-color-active: rgba(0,0,0,0.025);
        --firefox-safari-style-tab-border-bottom-color-inactive: var(--firefox-safari-style-tab-border-bottom-color-active);
        --firefox-safari-style-tab-border-left-color-active: rgba(0,0,0,0.1);
        --firefox-safari-style-tab-border-left-color-inactive: var(--firefox-safari-style-tab-border-left-color-active);
    } @else if $firefox-safari-style-vibrancy != false {
        --firefox-safari-style-tab-border-bottom-color-active: rgba(0,0,0,0.1);
        --firefox-safari-style-tab-border-bottom-color-inactive: var(--firefox-safari-style-tab-border-bottom-color-active);
        --firefox-safari-style-tab-border-left-color-active: rgba(0,0,0,0.1);
        --firefox-safari-style-tab-border-left-color-inactive: var(--firefox-safari-style-tab-border-left-color-active);
    }

    /* Colors e.g. for tabs or bookmarks */
    --firefox-safari-style-tab-color: hsl(250, 5%, 5%);
    --firefox-safari-style-tab-hover-color: var(--firefox-safari-style-tab-color);
    --firefox-safari-style-tab-hover-background: var(--firefox-safari-style-input-background-active);

    /********************/
    /* BUTTONS (URLBAR) */
    /********************/

    /* Button default size */
    --firefox-safari-style-button-width: 32px;
    --firefox-safari-style-button-height: 28px;
    /* Button background */
    --firefox-safari-style-button-background-active: transparent;
    --firefox-safari-style-button-background-inactive: transparent;
    --firefox-safari-style-button-background-hover: var(--firefox-safari-style-input-background-active);
    /* Border color of buttons and urlbar */
    --firefox-safari-style-button-border-color: transparent;
    --firefox-safari-style-button-border-color-top: transparent;
    --firefox-safari-style-button-border-color-bottom: transparent;
    --firefox-safari-style-button-border-color-inactive: transparent;
    /* Font and icon color of buttons and urlbar */
    --firefox-safari-style-button-color: rgba(0,0,0,0.6);
    --firefox-safari-style-button-input-color: var(--firefox-safari-style-button-color);

    --tab-min-height: 0 !important;
    --space-above-tabbar: 0 !important;
    --toolbarbutton-vertical-text-padding: 4px !important;
    --toolbarbutton-hover-transition-duration: 0ms !important;

    /**********/
    /* INPUTS */
    /**********/

    --firefox-safari-style-input-color: var(--firefox-safari-style-tab-color);
    
    /* Input background */
    --firefox-safari-style-input-background-active: rgba(0,0,0,0.075);
    --firefox-safari-style-input-background-inactive: rgba(0,0,0,0.11);
    --firefox-safari-style-input-background-hover: var(--firefox-safari-style-input-background-active);
    --firefox-safari-style-input-border-active: transparent;
    --firefox-safari-style-input-border-inactive: transparent;
}

/**************/
/* DARK THEME */
/**************/

@media (prefers-color-scheme: dark) {

    :root {

        /* Default Background color */
        --firefox-safari-style-background-color-active: #383839;
        /* Background color for inactive windows */
        --firefox-safari-style-background-color-inactive: #282828;
        /* Background color for private windows */
        --firefox-safari-style-background-color-private: #0d0d0d;

        /* Border colors */
        --firefox-safari-style-title-border-color-active: rgba(255,255,255,0.15);
        --firefox-safari-style-title-border-color-inactive: var(--firefox-safari-style-title-border-color-active);

        /******************/
        /* NAVIGATION BAR */
        /******************/

        /* Border colors */
        --firefox-safari-style-bar-border-color-active: rgba(255,255,255,0.05);
        --firefox-safari-style-bar-border-color-inactive: var(--firefox-safari-style-bar-border-color-active);

        /**********/
        /* INPUTS */
        /**********/

        /* Input background */
        --firefox-safari-style-input-background-active: rgba(255,255,255,0.15);
        --firefox-safari-style-input-background-inactive: rgba(255,255,255,0.11);
        --firefox-safari-style-input-background-hover: var(--firefox-safari-style-input-background-active);

        /********/
        /* TABS */
        /********/

        /* Default background color */
        --firefox-safari-style-tab-background-color-inactive: rgba(0,0,0,0.4);
        /* Background active tab */
        --firefox-safari-style-tab-background-color-active: var(--firefox-safari-style-background-color-active);
        /* Button background hover on incative tab */
        --firefox-safari-style-tab-background-color-hover: rgba(0,0,0,0.1);

        /* Border colors */
        --firefox-safari-style-tab-border-color-active: var(--firefox-safari-style-background-color-active);
        --firefox-safari-style-tab-border-color-inactive: var(--firefox-safari-style-tab-border-color-active);

        /* Colors e.g. for tabs or bookmarks */
        --firefox-safari-style-tab-color: rgba(255,255,255,0.6);
        --firefox-safari-style-tab-hover-color: var(--firefox-safari-style-tab-color);
        --firefox-safari-style-tab-hover-background: var(--firefox-safari-style-input-background-active);

        /********************/
        /* BUTTONS (URLBAR) */
        /********************/

        /* Button background */
        --firefox-safari-style-button-background-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent);
        /* Border color of buttons and urlbar */
        --firefox-safari-style-tab-border-bottom-color-active: rgba(255,255,255,0.2);
        --firefox-safari-style-tab-border-bottom-color-inactive: var(--firefox-safari-style-tab-border-bottom-color-active);
        --firefox-safari-style-tab-border-left-color-active: rgba(255,255,255,0.2);
        --firefox-safari-style-tab-border-left-color-inactive: var(--firefox-safari-style-tab-border-left-color-active);
        --firefox-safari-style-tab-border-left-color-vibrance: rgba(255,255,255,0.15);

        /* Font and icon color of buttons and urlbar */
        --firefox-safari-style-button-color: rgba(255,255,255,0.7);
        --firefox-safari-style-button-input-color: var(--firefox-safari-style-button-color);
    }
}


:root:has(#browser), :root:has(#browser):-moz-window-inactive {
    background-color: transparent !important;
    appearance: none !important;
}

@media (-moz-mac-yosemite-theme), (-moz-mac-big-sur-theme) {
    @media (prefers-color-scheme: dark) {
        [part="content"] {
            box-shadow: none !important;
        }
    }
    :root {
        background-image: none !important;
    }
    * {
        transition: none !important;
    }
    .wrapper {
        border-right-width: 0 !important;
    }
    #navigator-toolbox:has(#nav-bar:not([urlbar-exceeds-toolbar-bounds])) + #browser {
        z-index: 10000 !important;
    }
    #nav-bar[urlbar-exceeds-toolbar-bounds] {
        z-index: 10000 !important;
    }
    #mainPopupSet {
        #pageActionActivatedActionPanel, 
        #pageActionPanel, 
        #editBookmarkPanel, 
        .browser-extension-panel,
        #widget-overflow,
        #downloadsPanel,
        #appMenu-popup,
        > panel {
            margin-top: 2px !important;
        }
        #editBookmarkPanel .panel-arrow {
            transform: translateX(-4px);
        }
        .panel-arrowcontent {
            box-shadow: none !important;
        }
    }
    #main-window {
        -moz-appearance: none;
        --toolbarbutton-hover-background: transparent !important;
        
        /******************/
        /* FIREFOX THEMES */
        /******************/
        &[lwtheme="true"] {
            --firefox-safari-style-attention-color: var(--toolbar-field-focus-border-color, #0a84ff);
            --firefox-safari-style-outline-color: var(--firefox-safari-style-attention-color, #73a6f1);

            /* Default Background color */
            --firefox-safari-style-background-color-active: var(--lwt-accent-color);
            /* Background color for inactive windows */
            --firefox-safari-style-background-color-inactive: var(--lwt-accent-color);

            /* Default background color */
            @if $firefox-safari-style-vibrancy != false {
                --firefox-safari-style-tab-background-color-inactive: rgba(0,0,0,0.25);
            }
            @else {
                --firefox-safari-style-tab-background-color-inactive: var(--lwt-accent-color);
            }
            /* Colors e.g. for tabs or bookmarks */
            --firefox-safari-style-tab-color: var(--lwt-text-color, var(--lwt-tab-text, var(--toolbar-color)));
            --firefox-safari-style-tab-hover-color: var(--firefox-safari-style-tab-color);
            --firefox-safari-style-tab-hover-background: var(--toolbar-field-background-color, var(--firefox-safari-style-input-background-active));

            /* Inputs */
            --firefox-safari-style-input-color: var(--toolbar-field-color, var(--firefox-safari-style-tab-color));
            /*--firefox-safari-style-input-background-active: var(--toolbar-bgcolor, color-mix(in srgb, var(--arrowpanel-border-color, var(--toolbar-field-background-color, var(--toolbar-bgcolor, var(--toolbar-non-lwt-bgcolor, var(--urlbar-box-bgcolor, hsla(0,0%,100%,.8)))))) 66%, transparent));*/
            --firefox-safari-style-input-background-active: var(--toolbar-bgcolor, var(--arrowpanel-border-color, var(--toolbar-field-background-color, var(--toolbar-bgcolor, var(--toolbar-non-lwt-bgcolor, var(--urlbar-box-bgcolor, hsla(0,0%,100%,.8)))))));
            --firefox-safari-style-input-background-inactive: var(--firefox-safari-style-input-background-active);
            --firefox-safari-style-input-background-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent);
            /*--firefox-safari-style-input-border-active: var(--firefox-safari-style-tab-border-color-active);
            --firefox-safari-style-input-border-inactive: var(--firefox-safari-style-input-border-active);*/

            /* Background active tab */
            --firefox-safari-style-tab-background-color-active: var(--firefox-safari-style-background-color-active);
            --firefox-safari-style-tab-background-color-hover: var(--firefox-safari-style-input-background-active);

            /* Button background */
            --firefox-safari-style-button-background-hover: var(--firefox-safari-style-input-background-hover);
            
            /* Font and icon color of buttons and urlbar */
            --firefox-safari-style-button-color: var(--firefox-safari-style-tab-color);
            --firefox-safari-style-button-input-color: var(--lwt-tab-text, var(--toolbar-color));
            --firefox-safari-style-input-color: var(--firefox-safari-style-button-input-color);

            /* Border colors */
            --firefox-safari-style-tab-border-color-active: color-mix(in srgb, var(--firefox-safari-style-button-color) 14%, transparent);
            --firefox-safari-style-tab-border-color-inactive: var(--firefox-safari-style-tab-border-color-active);

            --firefox-safari-style-tab-border-bottom-color-active: var(--firefox-safari-style-tab-border-color-active);
            --firefox-safari-style-tab-border-bottom-color-inactive: var(--firefox-safari-style-tab-border-bottom-color-active);

            --firefox-safari-style-tab-border-left-color-active: var(--firefox-safari-style-tab-border-bottom-color-active);
            --firefox-safari-style-tab-border-left-color-inactive: var(--firefox-safari-style-tab-border-left-color-active);

            --firefox-safari-style-tab-border-left-color-vibrance: var(--firefox-safari-style-tab-border-color-active);

            /* Misc */
            --inactive-window-transition: 0s;
            --ext-theme-background-transition: 0s;
            --panelui-subview-transition-duration: 0s;

            &[lwt-toolbar="light"] {
                --firefox-safari-style-input-background-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 15%, transparent);
                --firefox-safari-style-button-background-hover: var(--firefox-safari-style-input-background-hover);
            }
            &[style*="--toolbar-bgcolor: rgba(0, 0, 0, 0)"] {
                /*--firefox-safari-style-input-background-active: color-mix(in srgb, var(--arrowpanel-border-color, var(--toolbar-field-background-color, var(--toolbar-bgcolor, var(--toolbar-non-lwt-bgcolor, var(--urlbar-box-bgcolor, hsla(0,0%,100%,.8)))))) 70%, transparent);*/
                --firefox-safari-style-input-background-active: var(--toolbarbutton-active-background);
                --firefox-safari-style-input-background-inactive: var(--firefox-safari-style-input-background-active);
                --firefox-safari-style-input-background-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent);
            }
        }
        html|body {
            box-sizing: border-box;
        }
        &, #navigator-toolbox, #navigator-toolbox * {
            transition: none !important;
        }
        &, html|body, .tabbrowser-tab[selected="true"], #TabsToolbar, #PersonalToolbar, #tabbrowser-tabpanels, #firefox-view-button:not([aria-pressed="false"]) {
            @if $firefox-safari-style-vibrancy != false {
                background-color: transparent !important;
            }
            @else {
                background: var(--firefox-safari-style-background-color-active) !important;
                &:-moz-window-inactive {
                    background: var(--firefox-safari-style-background-color-inactive) !important;
                }
            }
        }
        #titlebar:-moz-window-inactive {
            opacity: 1 !important;
        }
        #nav-bar {
            appearance: none !important;
            background-color: transparent !important;
            &:-moz-window-inactive {
                background-color: transparent !important;
            }
            @if $firefox-safari-style-vibrancy == false {
                background-image: linear-gradient(
                    to bottom, 
                    var(--firefox-safari-style-background-color-active) 0%, 
                    var(--firefox-safari-style-background-color-active) 100%
                ) !important;
                background-size: 10000px var(--firefox-safari-style-bar-height);
                background-repeat: no-repeat;
                background-position: 0 0;
                &:-moz-window-inactive {
                    background-image: linear-gradient(
                        to bottom, 
                        var(--firefox-safari-style-background-color-inactive) 0%, 
                        var(--firefox-safari-style-background-color-inactive) 100%
                    ) !important;
                }
            }
        }
        @if $firefox-safari-style-vibrancy == false {
            &[lwtheme="true"] {
                &, html|body, .tabbrowser-tab[selected="true"], #PersonalToolbar, #tabbrowser-tabpanels, #firefox-view-button:not([aria-pressed="false"]), sidebar-main {
                    appearance: none !important;
                    background-color: var(--lwt-accent-color) !important;
                }
                &:-moz-window-inactive {
                    &, html|body, .tabbrowser-tab[selected="true"], #PersonalToolbar, #tabbrowser-tabpanels, #firefox-view-button:not([aria-pressed="false"]), sidebar-main {
                        background-color: var(--firefox-safari-style-background-color-inactive) !important;
                    }
                }
            }
        }
        .dialogBox:not(.spotlightBox) {
            background: var(--firefox-safari-style-background-color-active) !important;
            &:-moz-window-inactive {
                background: var(--firefox-safari-style-background-color-inactive) !important;
            }
        }
        
        &, html|body {
            appearance: auto;
            -moz-default-appearance: -moz-mac-source-list;
            @media (prefers-color-scheme: light) {
                -moz-appearance: -moz-mac-vibrancy-light !important;
            }
            @media (prefers-color-scheme: dark) {
                -moz-appearance: -moz-mac-vibrancy-dark !important;
            }
        }
        &:not([lwtheme="true"]):not([inFullscreen="true"]) {
            &, html|body {
                background-color: transparent !important;
            }
        }
        @if $firefox-safari-style-vibrancy == tabs {
            #nav-bar, .tabbrowser-tab[selected="true"] {
                background: var(--firefox-safari-style-background-color-active) !important;
                &:-moz-window-inactive {
                    background: var(--firefox-safari-style-background-color-inactive) !important;
                }
            }
        }
        &[lwtheme="true"] {
            #TabsToolbar .toolbar-items {
                .tabbrowser-tab:not([selected="true"]), 
                #tabs-newtab-button, 
                #firefox-view-button[aria-pressed="false"],
                #alltabs-button {
                    box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-active);
                    &:-moz-window-inactive {
                        box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-vibrance) !important;
                    }
                }
            }
            .tabbrowser-tab:not([selected="true"]), 
            .toolbar-items #new-tab-button, 
            .toolbar-items #tabs-newtab-button, 
            .toolbar-items #alltabs-button,
            #firefox-view-button[aria-pressed="false"],
            #alltabs-button {
                background-color: rgba(0,0,0,0.075) !important;
                background-image: linear-gradient(to bottom, var(--firefox-safari-style-tab-background-color-hover) 0%, var(--firefox-safari-style-tab-background-color-hover) 100%) !important;
            }
        }
        &:not([lwtheme="true"]) {  
            #TabsToolbar .toolbar-items {
                background: var(--firefox-safari-style-background-color-active) !important;
                &:-moz-window-inactive {
                    background: var(--firefox-safari-style-background-color-inactive) !important;
                }
                .tabbrowser-tab:not([selected="true"]), 
                #tabs-newtab-button, 
                #alltabs-button,
                #firefox-view-button[aria-pressed="false"],
                #alltabs-button {
                    @if $firefox-safari-style-vibrancy != false {
                    
                        box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-active);
                        &:-moz-window-inactive {
                            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-vibrance) !important;
                        }
                    } @else {
                        box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-color-active), inset 0 2px 2px -1px var(--firefox-safari-style-tab-border-color-active);
                        @media (prefers-color-scheme: dark) {
                            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-bottom-color-active);
                        }
                        &:-moz-window-inactive {
                            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-color-inactive), inset 0 2px 2px -1px var(--firefox-safari-style-tab-border-color-inactive) !important;
                            @media (prefers-color-scheme: dark) {
                                box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-bottom-color-inactive) !important;
                            }
                        }
                    }
                }
            }
            .tabbrowser-tab:not([selected="true"]), 
            .toolbar-items #new-tab-button, 
            .toolbar-items #tabs-newtab-button, 
            .toolbar-items #alltabs-button,
            #firefox-view-button[aria-pressed="false"],
            #alltabs-button {
                background-color: transparent !important;
                background-image: linear-gradient(to bottom, var(--firefox-safari-style-tab-background-color-inactive) 0%, var(--firefox-safari-style-tab-background-color-inactive) 100%) !important;
            }
        }
        &[inFullscreen="true"] {
            html|body {
                border-color: transparent !important;
                .titlebar-buttonbox-container {
                    opacity: 0;
                }
                #urlbar[style*="translateY"] {
                    transform: translateY(0) !important;
                }
            }
        }
        > * > box:not([id]) {
            display: flex;
        }
        &[inDOMFullscreen="true"] > * > box:not([id]) {
            display: none;
        }
    }
    #navigator-toolbox {
        position: initial !important;
        display: flex;
        flex-direction: column;
        width: 100%;
        min-width: 100%;
        max-width: 100%;
        background-color: transparent !important;
        background-image: none !important;

        border-bottom: 1px solid var(--firefox-safari-style-tab-border-bottom-color-active) !important;
        &:-moz-window-inactive {
            border-bottom-color: var(--firefox-safari-style-tab-border-bottom-color-inactive) !important;
            toolbarbutton:not(#tabs-newtab-button):not(#firefox-view-button), image, .tab-icon-image {
                filter: grayscale(100%);
            }
            color: transparent;
        }
        #main-window[inFullscreen="true"] &.fullscreen-with-menubar {
            box-shadow: none !important;
            transform: none !important;
        }

        --urlbar-separator-color: transparent;
        
        #nav-bar {
            order: 1;
            flex: 1 1;
            padding-top: 11px !important;
            padding-right: 5px !important;
            padding-left: var(--firefox-safari-style-controls-width) !important;
            :root:not([chromemargin], [inFullscreen]) & {
                padding-left: 5px !important;
            }
            transition: none !important;
            /*background-image: var(--lwt-additional-images) !important;
            background-repeat: var(--lwt-background-tiling) !important;
            background-position: var(--lwt-background-alignment) !important;*/
            #main-window[inFullscreen="true"] & {
                padding-left: 6px !important;
            }
            &, > hbox:not(.titlebar-buttonbox-container), > box {
                min-height: var(--firefox-safari-style-bar-height) !important;
                max-height: var(--firefox-safari-style-bar-height) !important;
            }
            > toolbaritem, #nav-bar-customization-target toolbaritem {
                --urlbar-container-height: 28px;
                min-height: var(--urlbar-container-height) !important;
                max-height: var(--urlbar-container-height) !important;
            }
            toolbaritem, toolbarbutton {
                &, &:first-child {
                    padding-inline-start: 2px !important;
                }
            }
            > toolbarpaletteitem, #nav-bar-customization-target toolbarpaletteitem {
                &[removable="false"] {
                    opacity: 0.7 !important;
                }
                &[id*="wrapper-customizableui-special-spring"] {
                    opacity: 0.3 !important;
                    margin-left: 3px !important;
                    margin-right: 3px !important;
                }
            }
            #library-button[animate] > .toolbarbutton-icon {
                fill: var(--firefox-safari-style-button-color) !important;
            }
            #library-animatable-box {
                display: none !important;
            }
            > toolbarbutton, #nav-bar-customization-target toolbarbutton, #PanelUI-menu-button {
                &.toolbarbutton-1 {
                    .toolbarbutton-text {
                        padding-top: var(--toolbarbutton-vertical-text-padding) !important;
                        color: var(--firefox-safari-style-button-color) !important;
                    }
                    fill-opacity: 1 !important;
                    fill: var(--firefox-safari-style-button-color) !important;
                    #main-window[lwtheme="true"] &[aria-pressed="false"] {
                        fill: var(--firefox-safari-style-input-color) !important;
                    }
                }
                &#nav-bar-overflow-button, &#nav-bar-overflow-button:hover {
                    margin-top: 0 !important;
                    &, image {
                        background-color: transparent !important;
                        &, .toolbarbutton-icon {
                            width: var(--firefox-safari-style-button-width) !important;
                            max-width: var(--firefox-safari-style-button-width) !important;
                            min-width: var(--firefox-safari-style-button-width) !important;
                            height: var(--firefox-safari-style-button-height) !important;
                            max-height: var(--firefox-safari-style-button-height) !important;
                            min-height: var(--firefox-safari-style-button-height) !important;
                            padding-left: 0 !important;
                            padding-right: 0 !important;
                        }
                    }
                    margin-left: 4px !important;
                    --toolbarbutton-border-radius: 5px !important;
                    border-radius: 5px !important;
                    &:hover:not([disabled="true"]):not(:-moz-window-inactive) {
                        background-color: var(--firefox-safari-style-button-background-hover) !important;
                    }
                    width: var(--firefox-safari-style-button-width) !important;
                }
                &:not(#tabs-newtab-button):not(#urlbar-zoom-button):not(#nav-bar-overflow-button):not(#urlbar-searchmode-switcher) {
                    
                    background-color: var(--firefox-safari-style-button-background-active) !important;
                    &:hover:not([disabled="true"]):not(:-moz-window-inactive) {
                        background-color: var(--firefox-safari-style-button-background-hover) !important;
                    }
                    border: 1px solid var(--firefox-safari-style-button-border-color) !important;
                    @media
                    only screen and (   min--moz-device-pixel-ratio: 1.01),
                    only screen and (		min-device-pixel-ratio: 1.01),
                    only screen and (				min-resolution: 120dpi),
                    only screen and (				min-resolution: 1.3dppx) {
                        border-width: 0.5px !important;
                    }
                    border-top-color: var(--firefox-safari-style-button-border-color-top) !important;
                    border-bottom-color: var(--firefox-safari-style-button-border-color-bottom) !important;
                    
                    &:-moz-window-inactive {
                        background-color: var(--firefox-safari-style-button-background-inactive) !important;
                        border-color: var(--firefox-safari-style-button-border-color-inactive) !important;
                        border-top-color: var(--firefox-safari-style-button-border-color-inactive) !important;
                        border-bottom-color: var(--firefox-safari-style-button-border-color-inactive) !important;

                        @media (prefers-color-scheme: dark) {
                            background-color: var(--firefox-safari-style-button-background-active) !important;
                            border-color: var(--firefox-safari-style-button-border-color) !important;
                            border-top-color: var(--firefox-safari-style-button-border-color-top) !important;
                            border-bottom-color: var(--firefox-safari-style-button-border-color-bottom) !important;
                        }
                    }
                    border-radius: 5px !important;

                    margin-left: 4px !important;
                    &:not(#PanelUI-menu-button) {
                        margin-right: 0 !important;
                    }

                    height: var(--firefox-safari-style-button-height) !important;
                    min-height: var(--firefox-safari-style-button-height) !important;
                    max-height: var(--firefox-safari-style-button-height) !important;
                    width: var(--firefox-safari-style-button-width) !important;

                    &:not(#PanelUI-menu-button) {
                        image {
                            max-height: var(--firefox-safari-style-button-icon) !important;
                            max-width: var(--firefox-safari-style-button-icon) !important;
                        }
                    }
                    image {
                        &#fxa-avatar-image {
                            max-height: calc(var(--firefox-safari-style-button-icon) + 2px) !important;
                            max-width: calc(var(--firefox-safari-style-button-icon) + 2px) !important;
                        }
                        border-radius: 0 !important;
                        border: 0 !important;
                        background: transparent !important;
                        background-color: transparent !important;
                        padding: 0 !important;
                    }
                    stack {
                        padding: 0 !important;
                        &, &:hover {
                            background-color: transparent !important;
                        }
                    }
                    &#back-button, 
                    &#forward-button {
                        width: calc(var(--firefox-safari-style-button-height) + 2px) !important;
                        padding-inline-start: 2px !important;
                        padding-inline-end: 2px !important;
                        image {
                            list-style-image: url("chrome://global/skin/icons/arrow-left.svg");
                            max-height: calc(var(--firefox-safari-style-button-icon) + 2px) !important;
                            max-width: calc(var(--firefox-safari-style-button-icon) + 2px) !important;
                        }
                        * {
                            background-color: transparent !important;
                            box-shadow: none !important;
                        }
                    }
                    &#forward-button image {
                        transform: rotate(180deg);
                    }
                }
            }
            #nav-bar-customization-target {
                @media
                only screen and (   min--moz-device-pixel-ratio: 1.01),
                only screen and (		min-device-pixel-ratio: 1.01),
                only screen and (				min-resolution: 120dpi),
                only screen and (				min-resolution: 1.3dppx) {
                    margin-top: 0.5px !important;
                }
                #urlbar-container, #search-container {
                    padding: 0 !important;
                    #urlbar-input-container {
                        padding-inline-end: 2px !important;
                    }
                    #urlbar-input-container, &#search-container {
                        #main-window:not([privatebrowsingmode]) &, #main-window:not([privatebrowsingmode]) &:hover {
                            background: var(--firefox-safari-style-background-color-active) !important;
                            background-image: linear-gradient(to bottom, var(--firefox-safari-style-input-background-active) 0%, var(--firefox-safari-style-input-background-active) 100%) !important;
                            &:-moz-window-inactive {
                                background: var(--firefox-safari-style-background-color-inactive) !important;
                                background-image: linear-gradient(to bottom, var(--firefox-safari-style-input-background-inactive) 0%, var(--firefox-safari-style-input-background-inactive) 100%) !important;
                            }
                        }
                        display: flex;
                        align-items: center;
                        .urlbar-input-box {
                            flex: 1;
                        }
                        height: var(--firefox-safari-style-button-height) !important;
                        min-height: var(--firefox-safari-style-button-height) !important;
                        @media
                        only screen and (   min--moz-device-pixel-ratio: 1.01),
                        only screen and (		min-device-pixel-ratio: 1.01),
                        only screen and (				min-resolution: 120dpi),
                        only screen and (				min-resolution: 1.3dppx) {
                            height: calc(var(--firefox-safari-style-button-height) - 0.5px) !important;
                            min-height: calc(var(--firefox-safari-style-button-height) - 0.5px) !important;
                        }
                        > *, #identity-box, #urlbar-scheme, #urlbar-input {
                            height: calc(var(--firefox-safari-style-button-height) - 2px) !important;
                            min-height: calc(var(--firefox-safari-style-button-height) - 2px) !important;
                        }
                        #identity-box {
                            display: flex;
                            align-items: center;
                        }
                        .identity-box-button,
                        .identity-box-button:hover:active, .identity-box-button[open="true"], 
                        #tracking-protection-icon-container:hover:active, 
                        #tracking-protection-icon-container[open="true"],
                        .identity-box-button:hover:not([open="true"]), 
                        #tracking-protection-icon-container:hover:not([open="true"]) {
                            background-color: transparent !important;
                        }
                        #pageActionSeparator {
                            visibility: visible !important;
                            margin-right: 6px !important;
                        }
                    }
                    #searchbar {
                        display: flex;
                        .searchbar-search-icon-overlay, .search-go-container {
                            display:  none !important;
                        }
                        .searchbar-textbox {
                            flex: 1 1;
                        }
                    }
                    #urlbar, #searchbar {
                        --urlbar-height: 28px !important;
                        &:-moz-window-inactive {
                            opacity: 0.5 !important;
                            > * {
                                opacity: 1 !important;
                            }
                        }
                        padding-top: 0;
                        margin-left: 2px;
                        margin-right: 2px;
                        border: 0 solid transparent !important;
                        box-shadow: none !important;
                        box-sizing: border-box;
                        /*top: 0 !important;
                        left: 0 !important;
                        width: 100% !important;*/
                        height: calc(var(--urlbar-height, var(--firefox-safari-style-button-height)) + 0px) !important;
                        min-height: calc(var(--urlbar-height, var(--firefox-safari-style-button-height)) + 0px) !important;
                        max-height: calc(var(--urlbar-height, var(--firefox-safari-style-button-height)) + 0px) !important;
                        &[breakout][breakout-extend] > .urlbar-input-container, .urlbar-input-container {
                            padding-inline: 2px !important;
                        }
                        &[breakout][breakout-extend]:not(:-moz-window-inactive), &[focused="true"]:not(:-moz-window-inactive) {
                            box-shadow: 0 0 0 2px var(--firefox-safari-style-outline-color) !important;
                        }
                        @if $firefox-safari-style-vibrancy == all {
                            @media (prefers-color-scheme: light) {
                                &:not([focused="true"]) #urlbar-input-container:not(:-moz-window-inactive) {
                                    border-color: var(--firefox-safari-style-tab-border-bottom-color-active) !important;
                                }
                            }
                        }
                        /*@media
                        only screen and (   min--moz-device-pixel-ratio: 1.01),
                        only screen and (		min-device-pixel-ratio: 1.01),
                        only screen and (				min-resolution: 120dpi),
                        only screen and (				min-resolution: 1.3dppx) {
                            border-width: 0.5px !important;
                        }*/
                        background-image: none !important;
                        background-color: var(--firefox-safari-style-input-background-active) !important;
                        #main-window[privatebrowsingmode] & {
                            background-color: var(--firefox-safari-style-background-color-private) !important;
                        }
                        @if $firefox-safari-style-vibrancy != false {
                            &[open] {
                                .urlbar-input-container {
                                    background: var(--firefox-safari-style-background-color-active) !important;
                                    background-image: linear-gradient(to bottom, var(--firefox-safari-style-input-background-active) 0%, var(--firefox-safari-style-input-background-active) 100%) !important;
                                }
                            }
                        }

                        #page-action-buttons {
                            display: flex;
                            align-items: center;
                            #urlbar-zoom-button {
                                margin-top: 0 !important;
                                margin-bottom: 0 !important;
                            }
                            .star-button-box {
                                max-width: 20px;
                            }
                        }
                        #urlbar-background {
                            outline: none !important;
                        }
                        &[breakout] {
                            &, * {
                                transition: none !important;
                            }
                            #urlbar-background {
                                background: none !important;
                                background-color: transparent !important;
                                border-color: transparent !important;
                                box-shadow: none !important;
                            }
                            &[breakout-extend] {
                                #urlbar-background {
                                    opacity: 0 !important;
                                }
                                > #urlbar-input-container {
                                    padding-block: 0 !important;
                                    padding-inline: 0 !important;
                                    padding-inline-end: 2px !important;
                                }
                                &[open] {
                                    &, > #urlbar-input-container {
                                        border-bottom-color: transparent !important;
                                        border-bottom-left-radius: 0 !important;
                                        border-bottom-right-radius: 0 !important;
                                    }
                                }
                                --urlbar-margin-inline: 0px !important;
                                margin-left: 2px !important;
                            }
                        }
                        #urlbar-input-container {
                            padding-left: 0 !important;
                        }
                        .urlbarView {
                            position: absolute !important;
                            left: -4px !important;  
                            top: calc(var(--firefox-safari-style-tab-height) - 1px) !important;
                            margin-inline: 2px !important;
                            width: calc(100% + 4px) !important;
                            /*@media
                            only screen and (   min--moz-device-pixel-ratio: 1.01),
                            only screen and (		min-device-pixel-ratio: 1.01),
                            only screen and (				min-resolution: 120dpi),
                            only screen and (				min-resolution: 1.3dppx) {
                                margin-inline: 1.5px !important;
                                width: calc(100% + 5px) !important;
                            }*/
                            border-top: 0 !important;
                            border-right: 2px solid var(--firefox-safari-style-outline-color) !important;
                            border-bottom: 2px solid var(--firefox-safari-style-outline-color) !important;
                            border-left: 2px solid var(--firefox-safari-style-outline-color) !important;
                            background-image: linear-gradient(to bottom, var(--tabpanel-background-color) 0%, var(--tabpanel-background-color) 100%) !important;
                            background-color: var(--firefox-safari-style-input-background-active) !important;
                            border-bottom-left-radius: 5px !important;
                            border-bottom-right-radius: 5px !important;
                            > .urlbarView-body-outer,
                            > .search-one-offs {
                                &, &:hover {
                                    background: var(--firefox-safari-style-background-color-active) !important;
                                    background-image: linear-gradient(to bottom, var(--firefox-safari-style-input-background-active) 0%, var(--firefox-safari-style-input-background-active) 100%) !important;
                                    &:-moz-window-inactive {
                                        background: var(--firefox-safari-style-background-color-inactive) !important;
                                        background-image: linear-gradient(to bottom, var(--firefox-safari-style-input-background-inactive) 0%, var(--firefox-safari-style-input-background-inactive) 100%) !important;
                                    }
                                    #main-window[privatebrowsingmode] & {
                                        background-color: var(--firefox-safari-style-background-color-private) !important;
                                    }
                                }
                            }
                            > .urlbarView-body-outer {
                                .urlbarView-body-inner {
                                    border-top: 0 !important;
                                    * {
                                        border-radius: 0 !important;
                                    }
                                    .urlbarView-results {
                                        > :first-child {
                                            margin-top: 2px;
                                        }
                                        .urlbarView-row {
                                            padding: 0 !important;
                                        }
                                    }
                                }
                            }
                            > .search-one-offs {
                                padding-top: 0 !important;
                                padding-bottom: 0 !important;
                                .search-panel-one-offs-header {
                                    display: none !important;
                                }
                            }
                        }
                        &, #urlbar-input-container {
                            --toolbarbutton-border-radius: 5px !important;
                            border-radius: 5px !important;
                        }
                        &, html|input#urlbar-input, html|input#urlbar-input *, #searchbar-textbox, #searchbar-textbox * {
                            font-size: 13px !important;
                            color: var(--firefox-safari-style-input-color) !important;
                            #main-window[privatebrowsingmode] & {
                                color: white !important;
                            }
                        }
                        html|input#urlbar-input {
                            padding-left: 2px !important;
                        }
                        &[focused="true"][usertyping="true"] {
                            #identity-box, .urlbar-input-box {
                                padding-top: 0px !important;
                            }
                        }
                        .urlbar-icon {
                            max-width: 20px !important;
                            padding: 3px !important;
                            &.urlbar-addon-page-action, &[style*="moz-extension://"] {
                                padding: 0 !important;
                                max-height: 16px !important;
                                max-width: 16px !important;
                                margin-inline-start: 3px;
                                margin-inline-end: 3px;
                                @media
                                only screen and (   min--moz-device-pixel-ratio: 1.01),
                                only screen and (		min-device-pixel-ratio: 1.01),
                                only screen and (				min-resolution: 120dpi),
                                only screen and (				min-resolution: 1.3dppx) {
                                    transform: translateY(-0.5px);
                                }
                            }
                        }
                        #identity-box image {
                            max-height: 13px !important;
                            max-width: 13px !important;
                            transform: translate(2px, -1px);
                            @media
                            only screen and (   min--moz-device-pixel-ratio: 1.01),
                            only screen and (		min-device-pixel-ratio: 1.01),
                            only screen and (				min-resolution: 120dpi),
                            only screen and (				min-resolution: 1.3dppx) {
                                transform: translate(2px, -0.5px);
                            }
                        }
                        #identity-icon-box {
                            background-color: transparent !important;
                        }
                        #identity-box.extensionPage image {
                            transform: translate(2px, -1px);
                        }
                        #identity-icon-label {
                            padding-inline-start: 5px;
                        }
                        image:not(#userContext-indicator),
                        #identity-box, 
                        #tracking-protection-icon-container,
                        .urlbar-icon {
                            fill: var(--firefox-safari-style-button-input-color) !important;
                            fill-opacity: 1 !important;
                        }
                        @media (prefers-color-scheme: dark) {
                            #pageActionButton {
                                filter: invert(1);
                                opacity: 0.8;
                            }
                        }
                        #main-window[privatebrowsingmode] & image {
                            fill: white !important;
                            fill-opacity: 1 !important;
                        }
                        #searchbar-search-button {
                            margin-right: 3px;
                        }
                        #urlbar-searchmode-switcher {
                            background-color: transparent !important;
                            margin-right: 0 !important;
                            #searchmode-switcher-icon {
                                transform: translateX(2px);
                            }
                            #searchmode-switcher-dropmarker {
                                --firefox-safari-style-button-icon: 12px !important;
                            }
                        }
                    }
                }
                #back-button,
                #forward-button,
                #reload-button,
                #stop-button,
                #home-button,
                #nav-bar-overflow-button,
                .toolbarbutton-1:not(#firefox-view-button) {
                    &[disabled="true"] {
                        opacity: 1 !important;
                        image {
                            opacity: 0.5 !important;
                        }
                    }
                    &:-moz-window-inactive {
                        opacity: 0.5 !important; 
                        @media (prefers-color-scheme: dark) {
                            opacity: 0.35 !important; 
                        }
                    }
                }
                #downloads-button {
                    &, &:hover, .toolbarbutton-badge-stack, .toolbarbutton-badge-stack:hover {
                        background-color: transparent !important;
                    }
                    .toolbarbutton-badge-stack {
                        padding: 0 !important;
                        transform: scale(0.86) translateY(-1px);
                        #downloads-indicator-progress-outer {
                            transform: scale(1.1) translateY(1px);
                            @media
                            only screen and (   min--moz-device-pixel-ratio: 1.01),
                            only screen and (		min-device-pixel-ratio: 1.01),
                            only screen and (				min-resolution: 120dpi),
                            only screen and (				min-resolution: 1.3dppx) {
                                transform: scale(1.1) translateY(0.5px);
                            }
                        }
                    }
                }
                .webextension-browser-action .toolbarbutton-badge {
                    transform: scale(0.8) translateY(1px);
                }
                :not(.urlbar-icon-wrapper) > .urlbar-icon:not([disabled]):hover, .urlbar-icon-wrapper:not([disabled]):hover {
                    background-color: transparent !important;
                }
                #pageActionButton {
                    visibility: initial !important;
                }
                #pocket-button {
                    list-style-image: none !important;
                    background: url("chrome://browser/skin/pocket-outline.svg") 50% 50% / 12px 12px no-repeat;
                }
                #pocket-button-animatable-box {
                    display: none !important;
                }
                #star-button {
                    list-style-image: none !important;
                    background: url("chrome://browser/skin/bookmark-hollow.svg") 50% 50% / 12px 12px no-repeat;
                    /*margin-right: 6px;*/
                    margin-top: -1px !important;
                    &[starred="true"] {
                        background: var(--firefox-safari-style-attention-color) !important;
                        mask: url("chrome://browser/skin/bookmark.svg") 50% 50% / 12px 12px no-repeat;
                    }
                }
                #star-button-animatable-box {
                    display: none !important;
                }
                #urlbar-zoom-button, #userContext-icons, #contextual-feature-recommendation {
                    &, .toolbarbutton-text, #userContext-label {
                        border-radius: 3px !important;
                        border-width: 0 !important;
                        background-color: var(--firefox-safari-style-attention-color) !important;
                        border-color: transparent !important;
                        padding: 1px 2px 1px 2px !important;
                        font-size: 9px !important;
                        margin-top: -1px !important;
                        color: #fff !important;
                        animation: none !important;
                    }
                    &:not([hidden="true"]) + #pageActionSeparator {
                        margin-left: 0 !important;
                    }
                }
                #pageActionSeparator {
                    display: block !important;
                    height: 26px !important
                }
                #contextual-feature-recommendation {
                    display: none !important;
                }
                #userContext-icons {
                    &, #userContext-label {
                        background-color: var(--identity-tab-color) !important;
                    }
                    #userContext-indicator {
                        fill: #fff !important;
                        min-width: 10px !important;
                        width: 10px !important;
                        height: 10px !important;
                        min-height: 10px !important;
                        margin-left: 0 !important;
                        margin-right: 2px !important;
                    }
                }
                #reader-mode-button {
                    list-style-image: none !important;
                    background: url(chrome://browser/skin/readerMode.svg) 50% 50% / 12px 12px no-repeat;
                    background-image: url(chrome://browser/skin/reader-mode.svg);
                }
                :not(.urlbar-icon-wrapper) > .urlbar-icon:not([disabled])[open], 
                :not(.urlbar-icon-wrapper) > .urlbar-icon:not([disabled]):hover:active, 
                .urlbar-icon-wrapper:not([disabled])[open], 
                .urlbar-icon-wrapper:not([disabled]):hover:active {
                    background-color: transparent !important;
                }
            }
            #PanelUI-button {
                margin-left: 0 !important;
                margin-right: 7px !important;
                border-width: 0 !important;
                .toolbarbutton-badge {
                    margin-top: -8px !important;
                    margin-left: 3px !important;
                }
            }
            #PanelUI-menu-button {
                .toolbarbutton-badge-stack {
                    padding: 0 !important;
                    @media
                    only screen and (   min--moz-device-pixel-ratio: 1.01),
                    only screen and (		min-device-pixel-ratio: 1.01),
                    only screen and (				min-resolution: 120dpi),
                    only screen and (				min-resolution: 1.3dppx) {
                        transform: scale(1.1);
                    }
                }
                .toolbarbutton-icon {
                    width: var(--firefox-safari-style-button-icon) !important;
                    min-width: var(--firefox-safari-style-button-icon) !important;
                    max-width: var(--firefox-safari-style-button-icon) !important;
                    height: var(--firefox-safari-style-button-icon) !important;
                    min-height: var(--firefox-safari-style-button-icon) !important;
                    max-height: var(--firefox-safari-style-button-icon) !important;
                    /*list-style-image: url("chrome://global/skin/icons/more.svg");*/
                }
            }
            #PanelUI-button,
            #PanelUI-menu-button {
                margin-left: 0 !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
                width: var(--firefox-safari-style-button-width) !important;
                max-width: var(--firefox-safari-style-button-width) !important;
                min-width: var(--firefox-safari-style-button-width) !important;
                height: var(--firefox-safari-style-button-height);
                max-height: var(--firefox-safari-style-button-height);
                min-height: var(--firefox-safari-style-button-height);
                &, &:hover, .toolbarbutton-badge-stack, .toolbarbutton-badge-stack:hover {
                    background-color: transparent !important;
                }
            }
            #fxa-toolbar-menu-button {
                &, &:hover, .toolbarbutton-badge-stack, .toolbarbutton-badge-stack:hover {
                    background-color: transparent !important;
                }
                .toolbarbutton-badge-stack {
                    padding-top: 4px !important;
                    padding-bottom: 4px !important;
                }
            }
            @if $firefox-safari-style-grayscale-extension-buttons-in-toolbar == true {
                toolbarpaletteitem, toolbarbutton {
                    &.webextension-browser-action .toolbarbutton-icon {
                        filter: grayscale(100%);
                    }
                }
            }
            > panel {
                margin-top: 3px !important;
            }
        }
        #PersonalToolbar {
            order: 2;
            flex: 1 1;
            
            height: var(--firefox-safari-style-tab-height) !important;
            min-height: var(--firefox-safari-style-tab-height) !important;
            max-height: var(--firefox-safari-style-tab-height) !important;

            &[collapsed="true"] {
                display: none !important;
            }

            #PlacesToolbarItems {
                margin-top: 3px !important; 
                &,  > * {
                    max-height: calc(var(--firefox-safari-style-tab-height) - 7px) !important;
                }
            }
            #PlacesChevron {
                transform: translateX(5px) translateY(1px);
                border-radius: 0 !important;
                .toolbarbutton-icon { 
                    width: var(--firefox-safari-style-button-icon) !important;
                    height: var(--firefox-safari-style-button-icon) !important;
                    fill: var(--firefox-safari-style-button-color) !important;
                    margin-right: 1px !important;
                    &, &:hover {
                        background-color: transparent !important;
                    }
                }
                &, &:hover {
                    background-color: transparent !important;
                }
                @media (prefers-color-scheme: dark) {
                    opacity: 0.5 !important; 
                }
            }
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            
            border-top: 1px solid var(--firefox-safari-style-bar-border-color-active) !important;
            &:-moz-window-inactive {
                border-top-color: var(--firefox-safari-style-bar-border-color-inactive) !important;
            }

            #personal-bookmarks {
                #PlacesToolbar {
                    > hbox {
                        display: flex;
                        justify-content: center;
                    }
                }
                #PlacesToolbarItems {
                    .bookmark-item {
                        .toolbarbutton-icon[type="menu"] + .toolbarbutton-text {
                            background: url("chrome://global/skin/icons/arrow-dropdown-16.svg") 100% 50% / 9px 9px no-repeat;
                            padding-right: 12px !important;
                        }
                        padding-top: 0 !important;
                        padding-bottom: 0 !important;
                    }
                }
            }

            > toolbaritem:not(#personal-bookmarks) {
                toolbarbutton {
                    margin-top: 3px !important;
                    height: 16px !important;
                    max-height: 16px !important;
                    & image {
                        transform: scale(0.9);
                    }
                }
            }
        }
        .titlebar-buttonbox-container {
            position: absolute;
            left: 0;
            top: 2px;
            min-height: 27px !important;
            max-height: 27px !important;
            > .titlebar-buttonbox {
                margin-top: 18px;
                margin-left: 17px;
            }
        }
        .titlebar-spacer[type="pre-tabs"], .titlebar-spacer[type="post-tabs"] {
            max-width: 1px
        }
        #titlebar {
            flex: 1 1;
            max-height: var(--firefox-safari-style-tab-height) !important;
        }
        #titlebar,
        &:not(:has(> #titlebar)) #TabsToolbar {
            order: 3;
        }
        #toolbar-menubar {
            visibility: visible !important;
            #menubar-items, spacer {
                display: none !important ;
            }
        }
        #TabsToolbar {
            min-height: 0 !important;
            /*height: var(--firefox-safari-style-tab-height);*/
            
            /* Hide window controls */
            .titlebar-buttonbox-container, #menubar-items {
                display: none !important ;
            }
            @if $firefox-safari-style-vibrancy != false {
                -moz-appearance: none !important;
                background-color: transparent !important;
            }
            /* New tab button */
            #wrapper-alltabs-button {
                opacity: 1 !important;
            }
            #tabs-newtab-button, #new-tab-button {
                --toolbarbutton-inner-padding: 6px;
            }
            #tabs-newtab-button, #new-tab-button, #alltabs-button {
                height: var(--firefox-safari-style-tab-height);
                opacity: 1 !important;
                @if $firefox-safari-style-vibrancy != false {
                    &#alltabs-button {
                        opacity: 0.8 !important;
                    }
                }
                border-left: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
                &:-moz-window-inactive {
                    border-left: 1px solid var(--firefox-safari-style-tab-border-left-color-inactive) !important;
                }
                margin-left: auto !important;
                min-width: 25px !important;
                max-width: 25px !important;
                image,
                &#alltabs-button > stack {
                    opacity: 0.5 !important;
                    @media (prefers-color-scheme: dark) {
                        opacity: 1 !important;
                    }
                    &:-moz-window-inactive {
                        opacity: 0.5 !important; 
                        @media (prefers-color-scheme: dark) {
                            opacity: 0.35 !important; 
                        }
                    }
                }
                .toolbarbutton-icon { 
                    width: 21px !important;
                    height: 21px !important;
                    fill: var(--firefox-safari-style-tab-color) !important;
                    #main-window[lwtheme="true"] & {
                        fill: var(--firefox-safari-style-input-color) !important;
                    }
                    &, &:hover {
                        background-color: transparent !important;
                    }
                }
                &#alltabs-button {
                    list-style: none !important;
                    fill: var(--firefox-safari-style-tab-color) !important;
                    #main-window[lwtheme="true"] & {
                        fill: var(--firefox-safari-style-input-color) !important;
                    }
                    > stack {
                        * {
                            display: none !important;
                        }
                    } 
                    > stack {
                        opacity: 1 !important;
                        display: block !important;
                        background-color: transparent !important;
                        background: url(chrome://global/skin/icons/arrow-down.svg) 50% 50% / 9px 9px no-repeat !important;
                        opacity: 0.5 !important;
                        width: 9px;
                        height: 9px;
                    }
                    &[open="true"] stack, &[open="true"]:hover stack {
                        background-image: url(chrome://global/skin/icons/arrow-up.svg) !important;
                    }
                }
            }
            #tabbrowser-arrowscrollbox-periphery {
                width: 100%;
                #tabs-newtab-button {
                    min-width: 100% !important;
                    max-width: 100% !important;
                    width: 100% !important;
                    image,
                    &#alltabs-button > stack,
                    .toolbarbutton-icon {
                        margin-left: auto !important;
                    }
                }
            }
            .tabbrowser-tab:not([pinned]) ~ #tabbrowser-arrowscrollbox-periphery {
                width: auto;
                #tabs-newtab-button {
                    min-width: 25px !important;
                    max-width: 25px !important;
                    width: auto !important;
                    image,
                    &#alltabs-button > stack,
                    .toolbarbutton-icon {
                        margin-right: auto !important;
                    }
                }
            }
            .toolbar-items {
                &, #tabbrowser-tabs, tab.tabbrowser-tab, tab.tabbrowser-tab::after, tab.tabbrowser-tab stack, tab.tabbrowser-tab .tab-content, tab.tabbrowser-tab .tab-label-container, tab.tabbrowser-tab .tab-secondary-label {
                    min-height: var(--firefox-safari-style-tab-height) !important;
                    max-height: var(--firefox-safari-style-tab-height) !important;
                    height: var(--firefox-safari-style-tab-height) !important;
                }
                tab.tabbrowser-tab .tab-label {
                    line-height: calc(var(--firefox-safari-style-tab-height) - 1px) !important;
                }
                tab.tabbrowser-tab stack {
                    border-top: 1px solid transparent;
                    height: var(--firefox-safari-style-button-icon) !important;
                    min-height: var(--firefox-safari-style-button-icon) !important;
                    max-height: var(--firefox-safari-style-button-icon) !important;
                }
                #tabbrowser-tabs {
                    &, &[movingtab] {
                        margin-top: 0 !important;
                        margin-bottom: 0 !important;
                        padding-top: 0 !important;
                        padding-bottom: 0 !important;
                    }
                }
                overflow: hidden;
                &, > hbox {
                    width: 100% !important;
                }
                .tab-line {
                    display: none;
                }
                #firefox-view-button {
                    max-height: var(--firefox-safari-style-tab-height) !important;
                    padding: 0 10px;
                    width: 44px;
                    max-width: 44px;
                    min-width: 44px;
                    opacity: 1 !important;
                    @if $firefox-safari-style-vibrancy != false {
                        transform: translateX(1px);
                    }
                    border-right: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
                    fill: var(--firefox-safari-style-button-color) !important;
                    &:-moz-window-inactive {
                        border-right: 1px solid var(--firefox-safari-style-tab-border-left-color-inactive) !important;
                    }
                    &[aria-pressed="false"] {
                        @if $firefox-safari-style-vibrancy != false {
                            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-active);
                            &:-moz-window-inactive {
                                box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-vibrance) !important;
                            }
                        }
                    }
                    image {
                        margin-top: 1px !important;
                        height: 16px !important;
                        max-height: 16px !important;
                        background: transparent !important;
                        box-shadow: none !important;
                        outline: none !important;
                    }
                    &:-moz-window-inactive {
                        image {
                            opacity: 0.5 !important;
                        }
                    }
                    & + #tabbrowser-tabs {
                        border-inline-start: 0 !important;
                        padding-inline-start: 0 !important;
                        margin-inline-start: 0 !important;
                    }
                }
            }
            .titlebar-spacer[type="pre-tabs"] {
                border-inline-end: 1px solid transparent !important;
            }
            .tabbrowser-tab {
                > .tab-stack {
                    max-width: 100%;
                    .tab-icon-stack {
                        margin-top: -2px !important;
                        margin-left: 1px !important;
                    }
                }
                .tab-label-container[pinned] {
                    display: none !important;
                }
                &:not([fadein]),
                .tab-background {
                    display: none;
                }
                border-left: 1px solid transparent !important;
                &[fadein] ~ .tabbrowser-tab {
                    border-left: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
                    &:-moz-window-inactive {
                        border-left-color: var(--firefox-safari-style-tab-border-left-color-inactive) !important;
                    }
                }
                .tab-label-container:-moz-window-inactive {
                    opacity: 0.55 !important;
                    @media (prefers-color-scheme: dark) {
                        opacity: 1 !important;
                    }
                }
                .tab-content {
                    overflow: hidden;
                    &:-moz-window-inactive {
                        opacity: 0.55 !important;
                    }
                    @media (prefers-color-scheme: dark) {
                        opacity: 1 !important;
                    }
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    position: relative;
                    .tab-throbber {
                        #main-window[lwtheme="true"] & {
                            -moz-context-properties: initial !important;
                        }
                        filter: grayscale(100%);
                    }
                    .tab-throbber,
                    .tab-icon-image,
                    .tab-close-button {
                        order: 1;
                    }
                    .tab-icon-image {
                        background-image: none !important;
                        &:not([src]), &:-moz-broken {
                            content: url() !important;
                            background-image: url("chrome://global/skin/icons/defaultFavicon.svg") !important;
                            background-size: 16px 16px !important;
                            background-position: 50% 0% !important;
                            transform: translateY(-1px) !important;
                        }
                    }
                    .tab-throbber,
                    .tab-icon-image,
                    .tab-close-button,
                    .tab-icon-sound {
                        fill: var(--firefox-safari-style-button-color) !important;
                    }
                    @media (prefers-color-scheme: dark) {
                        .tab-throbber {
                            filter: invert(100%);
                            opacity: 0.7 !important;
                        }
                    }
                    .tab-throbber:not([pinned]),
                    .tab-icon-image:not([pinned]),
                    .tab-icon-image:not([pinned]) ~ .tab-close-button {
                        margin-left: -3px !important;
                        margin-right: 6px !important;
                        box-sizing: content-box;
                    }
                    .tab-throbber {
                        transform: translateY(-1px);
                    }
                    .tab-icon-image {
                        margin-top: 0 !important;
                        border-radius: 2px;
                        &:not([src]) {
                            &:not([busy]) {
                                display: block;
                            }
                            list-style-image: none !important;
                        }
                    }
                    .tab-throbber,
                    .tab-icon-image {
                        min-width: 16px;
                    }
                    #main-window[lwtheme="true"] & {
                        .tab-icon-image {
                            filter: drop-shadow(0 0 1px var(--firefox-safari-style-tab-border-color-active));
                        }
                    }
                    .tab-close-button {
                        display: none;
                        fill: var(--firefox-safari-style-tab-color) !important;
                        padding: 1px !important;
                        width: 14px !important;
                        min-width: 14px !important;
                        height: 14px !important; 
                        margin-inline-end: 7px !important;
                        margin-inline-start: -2px !important;
                        margin-top: -1px !important;
                    }
                    .tab-sharing-icon-overlay,
                    .tab-icon-overlay {
                        display: none !important;
                    }
                    .tab-label-container {
                        order: 2;
                        flex: 1 1 100%;
                        margin-top: -1px !important;
                        text-align: center !important;
                        display: flex;
                        max-width: 100%;
                        .tab-label {
                            flex: 1 1;
                            margin-top: 0 !important;
                            color: var(--firefox-safari-style-tab-color) !important;
                            line-height: 17px;
                        }
                    }
                }
                #main-window[lwtheme="true"] & {
                    &:not([selected="true"]) {
                        .tab-throbber,
                        .tab-icon-image,
                        .tab-close-button,
                        .tab-icon-sound {
                            fill: var(--firefox-safari-style-input-color) !important;
                        }
                        .tab-content {
                            .tab-label-container {
                                .tab-label {
                                    color: var(--firefox-safari-style-input-color) !important;
                                }
                            }
                        }
                    }
                }
                .tab-content {
                    @media (prefers-color-scheme: dark) {
                        &[selected="true"] {
                            .tab-label-container {
                                .tab-label {
                                    color: white !important;
                                }
                            }
                        }
                        &:-moz-window-inactive {
                            .tab-label {
                                opacity: 0.7;
                            }
                        }
                    }
                    .tab-icon-sound {
                        order: 3;
                        width: 14px !important;
                        height: 14px !important; 
                        margin-right: -3px !important;
                        margin-top: 1px !important;
                    }
                    .tab-icon-sound[pictureinpicture]:not(:hover), 
                    .tab-icon-sound[soundplaying]:not(:hover), 
                    .tab-icon-sound[muted]:not(:hover), 
                    .tab-icon-sound[activemedia-blocked]:not(:hover) {
                        opacity: 1 !important;
                    }
                    .tab-label-container {
                        display: flex;
                        mask-image: none !important;
                        .tab-text {
                            width: calc(100% - 10px);
                            max-width: calc(100% - 10px);
                            mask-image: linear-gradient(to left, transparent, black var(--tab-label-mask-size));
                        }
                        .tab-secondary-label {
                            margin: 0 !important;
                            min-width: 20px;
                            position: absolute;
                            right: 0;
                            > .tab-icon-sound-label {
                                position: absolute;
                                right: 4px;
                                max-width: 20px;
                                height: var(--firefox-safari-style-tab-height) !important;
                                color: transparent;
                                &.tab-icon-sound-playing-label {
                                    background: url(chrome://global/skin/media/audio.svg) 100% 50% / 12px 12px no-repeat;
                                    opacity: 0.7 !important;
                                }
                                &.tab-icon-sound-muted-label {
                                    background: url(chrome://global/skin/media/audio-muted.svg) 100% 50% / 12px 12px no-repeat;
                                    opacity: 0.7 !important;
                                }
                                &.tab-icon-sound-blocked-label {
                                    background: url(chrome://global/skin/media/audioNoAudioButton.svg) 100% 50% / 12px 12px no-repeat;
                                    opacity: 0.7 !important;
                                }
                                @media (prefers-color-scheme: dark) {
                                    &.tab-icon-sound-playing-label,
                                    &.tab-icon-sound-muted-label,
                                    &.tab-icon-sound-blocked-label {
                                        filter: invert(100%);
                                    }
                                }
                            }
                        }
                    }
                    .tab-icon-image:not([pinned]) ~ .tab-icon-sound:not([soundplaying]):not([muted]):not([activemedia-blocked]):not([pictureinpicture]), 
                    .tab-icon-image:not([pinned]) ~ .tab-icon-sound/*,
                    .tab-icon-image:not([busy]):not([pinned]):not([src]) ~ .tab-close-button*/ {
                        display: block !important;
                        opacity: 0;
                    }
                    @if $firefox-safari-style-show-favicons-in-tabs == false {
                        .tab-icon-image:not([busy]):not([pinned]) ~ .tab-close-button {
                            display: block !important;
                            opacity: 0;
                        }
                        .tab-icon-image:not([pinned]) {
                            display: none !important;
                        }
                    }
                    .tab-label {
                        padding-right: 9px !important;
                    }
                    .tab-icon-image:-moz-window-inactive {
                        opacity: 0.5 !important;
                    }
                    @if $firefox-safari-style-grayscale-favicons-in-tabs == true {
                        .tab-icon-image {
                            filter: grayscale(100%);
                        }
                    }
                }
                &::before, &::after {
                    display: none !important;
                }
                .tab-icon-image, .tab-throbber {
                    transform: translate(1px, -.5px);
                }
                .tab-text {
                    transform: translateY(-.5px);
                }
                &[pinned] {
                    width: 35.5px;
                    max-width: 35.5px;
                    min-width: 35.5px;
                    overflow: hidden !important;
                    .tab-content {
                        padding: 0px 5px !important;
                    }
                }
                .tabbrowser-tab[pinned] {
                    width: 39px;
                    max-width: 39px;
                    min-width: 39px;
                }
                &:-moz-any([image], [pinned]) > .tab-stack > .tab-content[attention]:not([selected="true"]), 
                > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
                    background: none !important;
                }
                &:hover .tab-content:not([pinned]) .tab-icon-image,
                &:hover .tab-content:not([pinned]) .tab-icon-image:not([src]),
                &:hover .tab-content:not([pinned]) .tab-throbber {
                    display: none !important;
                }
                &:hover .tab-content:not([pinned]) .tab-close-button {
                    display: block !important;
                    opacity: 0.8 !important;
                }
                @if $firefox-safari-style-show-favicons-in-tabs == true {
                    &:not(:hover) .tab-content .tab-icon-image {
                        opacity: 1 !important;
                    }
                    #main-window[lwtheme="true"] & {
                        &:not([selected="true"]):not(:hover) .tab-content .tab-icon-image {
                            opacity: 0.7 !important;
                        }
                    }
                }
            }
            .tab-content {
                overflow: hidden !important;
            }
            .tab-loading-burst,
            .private-browsing-indicator {
                display: none;
            }
        }
    }
    #statuspanel #statuspanel-label {
        border-color: var(--firefox-safari-style-input-background-active) !important;
        background-color: var(--firefox-safari-style-background-color-active) !important;
        #main-window[lwtheme="true"] & {
            background-color: var(--firefox-safari-style-tab-background-color-inactive) !important;
        }
        color: var(--firefox-safari-style-tab-color) !important;
        &:-moz-window-inactive {
            opacity: 0.6 !important;
        }
    }
    #tabs-newtab-button, #TabsToolbar #new-tab-button, #new-tab-button {
        list-style-image: url(chrome://global/skin/icons/add.svg) !important;
        list-style-image: url(chrome://browser/skin/new-tab.svg) !important;
        list-style-image: url(chrome://global/skin/icons/plus.svg) !important;
        @if $firefox-safari-style-vibrancy != false {
            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-active);
            &:-moz-window-inactive {
                box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-vibrance) !important;
            }
        }
    }
    #private-browsing-indicator-with-label {
        display: none;
    }
    #urlbar, #searchbar {
        border-width: 0 !important;
        &:not([focused="true"]) #urlbar-input-container:not(:-moz-window-inactive) {
            border-color: var(--firefox-safari-style-input-border-active) !important;
        }
    }
    #searchbar,
    #search-container,
    #wrapper-search-container,
    #extension-icon[tooltiptext*="NelliTab"], 
    #identity-icon[tooltiptext*="NelliTab"] ~ #identity-icon-labels, 
    #identity-icon-label[value*="NelliTab"] { 
        display: none !important;
    }
    #identity-icon-label { 
        padding-inline-start: 6px;
    }
    #customization-panelWrapper {
        transform: translateX(12px);
    }
    #PersonalToolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active), 
    .tabbrowser-arrowscrollbox:not([scrolledtostart="true"])::part(scrollbutton-up), 
    .tabbrowser-arrowscrollbox:not([scrolledtoend="true"])::part(scrollbutton-down), 
    .findbar-button:not(:-moz-any([checked="true"], [disabled="true"])), 
    toolbarbutton.bookmark-item:not(.subviewbutton):not([disabled="true"]):not([open]):not(#PanelUI-menu-button), 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button) > .toolbarbutton-icon, 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button) > .toolbarbutton-text, 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button) > .toolbarbutton-badge-stack {
        color: var(--firefox-safari-style-tab-color) !important;
    }
    toolbarbutton#OtherBookmarks {
        max-height: calc(var(--firefox-safari-style-tab-height) - 7px) !important;
        transform: translateY(3px);
    }
    #PersonalToolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):hover, 
    .tabbrowser-arrowscrollbox:not([scrolledtostart="true"])::part(scrollbutton-up):hover, 
    .tabbrowser-arrowscrollbox:not([scrolledtoend="true"])::part(scrollbutton-down):hover, 
    .findbar-button:not(:-moz-any([checked="true"], [disabled="true"])):hover, 
    toolbarbutton.bookmark-item:not(.subviewbutton):hover:not([disabled="true"]):not([open]):not(#PanelUI-menu-button), 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button):hover > .toolbarbutton-icon, 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button):hover > .toolbarbutton-text, 
    toolbar .toolbarbutton-1:not([disabled="true"]):not([checked]):not([open]):not(:active):not(#PanelUI-menu-button):hover > .toolbarbutton-badge-stack {
        color: var(--firefox-safari-style-tab-hover-color) !important;
        background-color: var(--firefox-safari-style-tab-hover-background) !important;
    }
    #PersonalToolbar .toolbarbutton-1:-moz-focusring, 
    .findbar-button:-moz-focusring, findbar toolbarbutton.tabbable:-moz-focusring, 
    toolbarbutton.bookmark-item:not(.subviewbutton):-moz-focusring, 
    toolbar:not(#PersonalToolbar) .toolbarbutton-1:-moz-focusring > .toolbarbutton-icon, 
    toolbar:not(#PersonalToolbar) .toolbarbutton-1:-moz-focusring > .toolbarbutton-text, 
    toolbar:not(#PersonalToolbar) .toolbarbutton-1:-moz-focusring > .toolbarbutton-badge-stack {
        outline: none !important;
    }
    toolbarbutton.bookmark-item {
        opacity: 0.7 !important;
        &:-moz-window-inactive {
            opacity: 0.6 !important;
        }
        @media (prefers-color-scheme: dark) {
            opacity: 1 !important;
            color: var(--firefox-safari-style-tab-color) !important;
        }
        .toolbarbutton-icon {
            border-radius: 2px;
        }
    }
    #scrollbutton-up,
    #scrollbutton-down {
        border-left: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
        border-right: 0 solid transparent !important;
        border-top: 0 !important;
        border-bottom: 0 !important;
        border-radius: 0 !important;
        margin-bottom: 0 !important;
        &:-moz-window-inactive {
            border-left-color: var(--firefox-safari-style-tab-border-left-color-inactive) !important;
        }
        @if $firefox-safari-style-vibrancy != false {
            box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-active);
            &:-moz-window-inactive {
                box-shadow: inset 0px 1px 0px var(--firefox-safari-style-tab-border-left-color-vibrance) !important;
            }
        }
        &, image { 
            opacity: 1 !important;
            @if $firefox-safari-style-vibrancy != false {
                opacity: 0.8 !important;
            }
        }
        image {
            fill: var(--firefox-safari-style-button-color) !important;
            border-color: var(--firefox-safari-style-button-color) !important;
            max-width: 12px;
            opacity: 1 !important;
            &:-moz-window-inactive {
                opacity: 0.5 !important;
            }
        }
        &[disabled="true"] image {
            opacity: 0.4 !important;
        }
    }
    #scrollbutton-up {
        border-left: 0 !important;
        border-right: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
        border-right: 1px solid var(--firefox-safari-style-tab-border-left-color-active) !important;
        box-shadow: -1px 0px 0px var(--firefox-safari-style-tab-border-left-color-active);
        &:-moz-window-inactive {
            border-right-color: var(--firefox-safari-style-tab-border-left-color-inactive) !important;
            box-shadow: -1px 0px 0px var(--firefox-safari-style-tab-border-left-color-inactive);
        }
    }
    #scrollbutton-up ~ spacer {
        opacity: 0 !important;
    }
    spacer[part="overflow-start-indicator"],
    spacer[part="overflow-end-indicator"] {
        border-image: none !important;
        border-left-width: 0 !important;
        border-right-width: 0 !important;
    }
    #personal-bookmarks .bookmark-item .toolbarbutton-icon {
        display: none !important;
    }
    #appMenu-popup, #widget-overflow {
        filter: drop-shadow(0 0 1px rgba(0,0,0,0.1));
    }
    #identity-box:hover:not(.no-hover):not([open="true"]), 
    #tracking-protection-icon-container:hover:not([open="true"]) {
        background-color: transparent !important;
    }
    #scrollbutton-up,
    #scrollbutton-down {
        min-width: 26px;
        list-style: none !important;
        &, & image {
            fill: var(--firefox-safari-style-tab-color) !important;
        }
        image {
            background: url(chrome://global/skin/icons/arrow-left.svg) 50% 50% / 12px 12px no-repeat;
            width: 12px;
            height: 12px;
        }
        background-color: transparent !important;
        #main-window[lwtheme="true"] & {
            background-image: linear-gradient(to bottom, var(--firefox-safari-style-tab-background-color-inactive) 0%, var(--firefox-safari-style-tab-background-color-inactive) 100%) !important;
        }
        &:not([disabled="true"]):hover {
            background-image: linear-gradient(to bottom, var(--firefox-safari-style-tab-background-color-hover) 0%, var(--firefox-safari-style-tab-background-color-hover) 100%) !important;
        }
    }
    #scrollbutton-down image {
        transform: rotate(180deg) !important;
    }
    .tab-icon-image:not([src]):not([pinned]):not([crashed]):not([busy]):not([pictureinpicture])[selected]:not(:hover), 
    .tab-icon-image:not([src]):not([pinned]):not([crashed]):not([busy]):not([sharing]):not([pictureinpicture]):not(:hover) {
        display: block !important;
        background: none; /*url(chrome://branding/content/icon32.png) 50% 50% / 16px 16px no-repeat;*/
        &:not([src]), &:-moz-broken {
            margin-top: -3px;
        }
    }
    .urlbar-icon:-moz-focusring, .urlbar-icon-wrapper:-moz-focusring {
        outline: none !important;
    }
    .tabbrowser-tab:not([pinned])[fadein] {
        max-width: none !important;
    }
    #nav-bar ~ div {
        position: absolute;
        height: 100vh;
        width: 100%;
    }
    #nav-bar ~ #tab-notification-deck > .notificationbox-stack, 
    #nav-bar ~ .notificationbox-stack, 
    #nav-bar ~ div > .notificationbox-stack {
        position: absolute !important;
        bottom: 3px;
        right: 3px;
        z-index: 1000 !important;
        filter: drop-shadow(0 0 2px rgba(0,0,0,0.1));
        width: auto !important;
        background: transparent !important;
        display: block !important;
    }
    #nav-bar {
        padding-right: 8px !important;
    }
    #identity-box {
        margin-inline-end: 0 !important;
    }
    #downloads-button {
        .toolbarbutton-badge-stack {
            transform: none !important;
            #downloads-indicator-progress-outer {
                transform: none !important;
            }
        }
    }
    #nav-bar-overflow-button, #nav-bar-overflow-button:hover {
        image {
            &, .toolbarbutton-icon {
                padding: 6px 0 !important;
                @media
                only screen and (   min--moz-device-pixel-ratio: 1.01),
                only screen and (		min-device-pixel-ratio: 1.01),
                only screen and (				min-resolution: 120dpi),
                only screen and (				min-resolution: 1.3dppx) {
                    padding: 5.5px 0 !important;
                }
            }
        }
    }
    #navigator-toolbox #nav-bar > toolbarbutton:not(#tabs-newtab-button):not(#urlbar-zoom-button):not(#nav-bar-overflow-button):not(#PanelUI-menu-button) image, 
    #navigator-toolbox #nav-bar #nav-bar-customization-target toolbarbutton:not(#tabs-newtab-button):not(#urlbar-zoom-button):not(#nav-bar-overflow-button):not(#PanelUI-menu-button) image,
    #navigator-toolbox #nav-bar #PanelUI-menu-button:not(#tabs-newtab-button):not(#urlbar-zoom-button):not(#nav-bar-overflow-button):not(#PanelUI-menu-button) image {
        min-height: var(--firefox-safari-style-button-icon) !important;
        min-width: var(--firefox-safari-style-button-icon) !important;
        --firefox-safari-style-button-icon: 17px;
    }
    #onepassword4_agilebits_com-browser-action {
        --webextension-menupanel-image: url("chrome://browser/skin/login.svg") !important;
        --webextension-menupanel-image-light: url("chrome://browser/skin/login.svg") !important;
        --webextension-menupanel-image-dark: url("chrome://browser/skin/login.svg") !important;
        --webextension-menupanel-image-2x: url("chrome://browser/skin/login.svg") !important;
        --webextension-menupanel-image-2x-light: url("chrome://browser/skin/login.svg") !important;
        --webextension-menupanel-image-2x-dark: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image-light: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image-dark: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image-2x: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image-2x-light: url("chrome://browser/skin/login.svg") !important;
        --webextension-toolbar-image-2x-dark: url("chrome://browser/skin/login.svg") !important;
    }
    #navigator-toolbox #nav-bar #PanelUI-menu-button .toolbarbutton-badge-stack {
        transform: none !important;
        image {
            list-style-image: url("chrome://global/skin/icons/settings.svg");
        }
    }
    .sharing-icon, #identity-icon, #tracking-protection-icon, .notification-anchor-icon, #blocked-permissions-container > .blocked-permission-icon {
        margin-inline-start: 2px;
        &:not(#identity-icon) {
            margin-inline-end: 2px;
        }
    }
    #identity-box {
        --urlbar-icon-padding: 2px;
        padding-right: 4px;
    }
    #identity-box[pageproxystate="valid"] {
        > .identity-box-button,
        > .identity-permission-box {
            padding-inline: 2px !important;
            padding-inline-start: 4px !important;
            min-width: 24px !important;
        }
        &.extensionPage > .identity-box-button {
            padding-inline-start: 3px !important;
        }
    }
    #PersonalToolbar {
        #PlacesChevron {
            transform: translateX(5px) translateY(-1px) !important;
        }
    }
    #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab[first-visible-unpinned-tab],
    #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab[pinned="true"] + .tabbrowser-tab:not([pinned="true"]) {
        margin-inline-start: 0 !important;
    }
    #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab:nth-child(1 of :not([pinned], [hidden])) {
        margin-inline-start: 0 !important;
    }
    scrollbox, #tabbrowser-arrowscrollbox::part(scrollbox) {
        padding-inline: 0 !important;
    }


    /*****************/
    /* VERTICAL TABS */
    /*****************/

    :root {
        --firefox-safari-style-vertical-tab-min-width: 77px;
        --firefox-safari-style-vertical-tab-max-width: 261px;

        --firefox-safari-style-vertical-tab-box-width: var(--firefox-safari-style-vertical-tab-max-width);

        --firefox-safari-style-vertical-tab-width: 50px;
        &:has(#tabbrowser-tabs[orient="vertical"]) {
            --firefox-safari-style-vertical-tab-width: var(--firefox-safari-style-vertical-tab-min-width);
        }
        &:has(sidebar-main[expanded]) {
            --firefox-safari-style-vertical-tab-width: var(--firefox-safari-style-vertical-tab-max-width) !important;
        }
    }
    .wrapper { 
        background-color: transparent !important;
        min-width: initial !important;
    }
    #main-window:not([customizing]) {
        #navigator-toolbox:has(~ #browser #sidebar-main:not([hidden="true"]) #tabbrowser-tabs[orient="vertical"]) {
            #nav-bar {
                padding-left: var(--firefox-safari-style-vertical-tab-width) !important;
                background-position-x: var(--firefox-safari-style-vertical-tab-width) !important;
    
                @if $firefox-safari-style-vibrancy == false {
                    background-image: linear-gradient(
                        to bottom, 
                        var(--firefox-safari-style-background-color-active) 0%, 
                        var(--firefox-safari-style-background-color-active) calc(var(--firefox-safari-style-bar-height) - 1px),
                        var(--firefox-safari-style-tab-border-bottom-color-active) calc(var(--firefox-safari-style-bar-height) - 1px),
                        var(--firefox-safari-style-tab-border-bottom-color-active) 100%
                    ) !important;
                    background-size: 10000px var(--firefox-safari-style-bar-height);
                    background-repeat: no-repeat;
                    background-position: 0 0;
                    &:-moz-window-inactive {
                        background-image: linear-gradient(
                            to bottom, 
                            var(--firefox-safari-style-background-color-inactive) 0%, 
                            var(--firefox-safari-style-background-color-inactive) calc(var(--firefox-safari-style-bar-height) - 1px),
                            var(--firefox-safari-style-tab-border-bottom-color-inactive) calc(var(--firefox-safari-style-bar-height) - 1px),
                            var(--firefox-safari-style-tab-border-bottom-color-inactive) 100%
                        ) !important;
                    }
                }
            }
            #TabsToolbar {
                display: none !important;
            }
            &:has(~ #browser sidebar-main[expanded]) {
                #sidebar-button {
                    position: absolute;
                    left: 78px;
                }
            }
            border-bottom-width: 0 !important;
        }
        &[inFullscreen="true"] {
            #navigator-toolbox:has(~ #browser sidebar-main #tabbrowser-tabs[orient="vertical"]) {
                #sidebar-button {
                    position: absolute !important;
                    left: 18px !important;
                }
            }
            #navigator-toolbox:has(~ #browser sidebar-main[expanded] #tabbrowser-tabs[orient="vertical"]) {
                #sidebar-button {
                    left: 5px !important;
                }
            }
        }
    }
       
    #vertical-tabs[visible] {
        #tabbrowser-tabs {
            display: flex !important;
        }
        #newtab-button-container {
            &, &[showborder] {
                border-top-width: 0 !important;
            }
            sidebar-main[expanded] & .toolbarbutton-icon {
                margin-left: 9px;
            }
            order: 3;
            margin: 0 !important;
            margin-inline-start: 0 !important;
            margin-inline-end: 0 !important;
        }
        margin-inline-end: 0 !important;
        sidebar-main[expanded] & {
            display: block !important;
            padding-right: 5px;
        }
        sidebar-main:not([expanded]) & {
            display: flex !important;
            justify-content: center !important;
        }
        
    }
    scrollbox[orient="vertical"] {
        overflow-y: hidden !important;
    }
    sidebar-main {
        background-color: var(--firefox-safari-style-background-color-active) !important;
        &:-moz-window-inactive {
            background-color: var(--firefox-safari-style-background-color-inactive) !important;
        }
    }
    #navigator-toolbox:has(~ #browser #sidebar-main #tabbrowser-tabs[orient="vertical"]),
    sidebar-main {
        background-size: 1px 1px !important;
        background-repeat: repeat-y !important;
        background-position: calc(var(--firefox-safari-style-vertical-tab-width) - 1px) 0 !important;
        background-image: linear-gradient(
            to bottom, 
            color-mix(in srgb, var(--firefox-safari-style-tab-border-bottom-color-active) 50%, transparent) 0%, 
            color-mix(in srgb, var(--firefox-safari-style-tab-border-bottom-color-active) 50%, transparent) 100%
        ) !important;
        #main-window[lwtheme="true"] & {
            background-image: linear-gradient(
                to bottom, 
                var(--firefox-safari-style-tab-border-bottom-color-active) 0%, 
                var(--firefox-safari-style-tab-border-bottom-color-active) 100%
            ) !important;
        }
        &:-moz-window-inactive {
            background-color: var(--firefox-safari-style-background-color-inactive) !important;
            background-image: linear-gradient(
                to bottom, 
                color-mix(in srgb, var(--firefox-safari-style-tab-border-bottom-color-inactive) 50%, transparent) 0%, 
                color-mix(in srgb, var(--firefox-safari-style-tab-border-bottom-color-inactive) 50%, transparent) 100%
            ) !important;
            #main-window[lwtheme="true"] & {
                background-image: linear-gradient(
                    to bottom, 
                    var(--firefox-safari-style-tab-border-bottom-color-inactive) 0%, 
                    var(--firefox-safari-style-tab-border-bottom-color-inactive) 100%
                ) !important;
            }
        }
    }
    #main-window:has(#browser #sidebar-main #tabbrowser-tabs[orient="vertical"]) #sidebar-box {
        order: 2 !important;
    }
    #main-window:not([lwtheme="true"]) { 
        #sidebar-main, sidebar-main {
            background-color: transparent !important;
            &:-moz-window-inactive {
                background-color: var(--firefox-safari-style-background-color-inactive) !important;
            }
        }
    }
    sidebar-main {
        min-width: var(--firefox-safari-style-vertical-tab-width) !important;
        max-width: var(--firefox-safari-style-vertical-tab-width) !important;
        /*box-shadow: inset -4px 0 2px -2px hsla(0,0%,0%,.033) !important;*/
    }
    moz-button:part(button) {
        fill: var(--firefox-safari-style-button-color) !important;
        &:-moz-window-inactiv {
            opacity: 0.5;
        }
    }
    
    sidebar-main[expanded]:has(#vertical-tabs[visible]) .tab-label-container,
    #tabbrowser-tabs[orient="vertical"]:not([movingtab]) .tabbrowser-tab:hover .tab-close-button {
        display: block !important;
    }
    sidebar-main[expanded] #tabbrowser-tabs[orient="vertical"] #tabbrowser-arrowscrollbox .tabbrowser-tab {
        &, &[selected="true"]:not([disabled="true"])[selected="true"] {
            &:hover .tab-content .tab-icon-stack {
                > .tab-icon-image,
                > :not(.tab-icon-overlay) {
                    opacity: 0 !important;
                }
            }
        }
    }
    sidebar-main .tab-label-container {
        margin-left: 0 !important;
    }
    #main-window:not([lwtheme="true"]) {
        /* Active bottom */
        --button-background-color: var(--firefox-safari-style-input-background-active) !important;
        /* Active top */
        --button-background-color-ghost-active: var(--firefox-safari-style-input-background-active) !important;
        /* Hover */
        --button-background-color-ghost-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent) !important;
        /* ? */
        --button-background-color-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent) !important;
    }
    #main-window[lwtheme="true"] {
        /* Active bottom */
        --button-background-color: var(--firefox-safari-style-input-background-active) !important;
        /* Active top */
        --button-background-color-ghost-active: var(--firefox-safari-style-input-background-active) !important;
        /* Hover */
        --button-background-color-ghost-hover: var(--firefox-safari-style-input-background-hover) !important;
        /* ? */
        --button-background-color-hover: color-mix(in srgb, var(--firefox-safari-style-input-background-active) 50%, transparent) !important;
    }
    .bottom-actions.actions-list,
    .tools-and-extensions.actions-list {
        /* inactive */
        --button-text-color-ghost: var(--firefox-safari-style-button-color) !important;
        /* active */
        --button-text-color: var(--firefox-safari-style-button-input-color) !important;
        /* hover */
        --button-text-color-ghost-hover: var(--firefox-safari-style-button-color) !important;
        margin-left: 2px !important;
        margin-right: 2px !important;
        &:-moz-window-inactive {
            opacity: 0.5 !important;
        }
        moz-button + moz-button {
            margin-top: 2px !important;
        }
    }
    button-group,
    .tools-and-extensions,
    .tools-and-extensions.actions-list,
    .bottom-actions.actions-list {
        margin-bottom: 2px !important;
        align-items: center !important;
        padding-bottom: 5px;
        --button-min-height: 30px !important;
        --button-size-icon: 23px !important;
    }
    .expanded-button {
        --button-outer-padding-inline: 6px !important;
    }
    #vertical-pinned-tabs-container-separator {
        opacity: 0.75 !important;
        sidebar-main[expanded] & {
            display: none !important;
            opacity: 0 !important;
        }
        transform: translate(-3px, 2px);
        margin-top: 10px;
        margin-bottom: 0;
    }
    #vertical-pinned-tabs-container {
        sidebar-main &,
        sidebar-main:not([expanded]) & {
            &, &:not(:empty) {
                border-bottom-width: 0 !important;
            }
        }
        overflow-x: hidden !important;
        overflow-y: hidden !important;
    }
    #tabbrowser-tabs[orient="vertical"]  {
        #tabbrowser-arrowscrollbox {
            overflow: hidden;
        }
        .tabbrowser-tab,
        .tabbrowser-tab:hover/*,
        .tabbrowser-tab:not([disabled="true"]):has(.tab-close-button:hover):hover > .tab-stack > .tab-background,
        .tabbrowser-tab[selected="true"]:not([disabled="true"]):has(.tab-close-button:hover) .tab-background*/ {
            background-color: transparent !important;
            background-image: none !important;
        }
        #vertical-tabs-newtab-button {
            display: flex !important;
            align-items: center !important;
            border-radius: 5px !important;
            .toolbarbutton-icon {
                transform: translateY(0.5px);
            }
            .toolbarbutton-text {
                padding-inline-start: 2px !important;
            }
        }
        #vertical-tabs-newtab-button,
        .tabbrowser-tab {
            min-width: initial !important;
            .tab-throbber,
            .tab-icon-image,
            .tab-close-button,
            .tab-icon-pending, 
            .tab-sharing-icon-overlay, 
            .tab-icon-overlay,
            image { 
                fill: var(--firefox-safari-style-button-color) !important;
                sidebar-main[expanded] & {
                    margin-inline-end: 5.5px;
                }
                opacity: 0.7 !important;
            }

            &[pinned] {
                .tab-throbber,
                .tab-icon-image,
                .tab-close-button,
                .tab-icon-pending, 
                .tab-sharing-icon-overlay, 
                .tab-icon-overlay,
                image {
                    margin-right: 0 !important;
                }
            }
            label { 
                color: var(--firefox-safari-style-button-color) !important;
            }
            .tab-background {
                /*&:not([selected], [multiselected]) {
                    background-color: transparent !important;
                }*/
                outline: none !important;
                border-width: 0 !important;
                border-radius: 5px !important;
            }
            &[usercontextid] .tab-background {
                border-top-left-radius: 0 !important;
                border-bottom-left-radius: 0 !important;
            }
            .tab-content {
                display: flex !important;
                justify-content: flex-start !important;
                padding: 0 8px !important;
            }
            --firefox-move-icon: calc(var(--firefox-safari-style-vertical-tab-width) - var(--firefox-safari-style-bar-height));
            .tab-close-button {
                display: none !important;
                width: 16px !important;
                height: 16px !important;
                padding: 2px !important;
                transform: translateX(calc(-1px - var(--firefox-move-icon)));
            }
            &:hover {
                .tab-close-button {
                    display: block !important;
                }
            }
            .tab-icon-stack {
                .tab-sharing-icon-overlay {
                    display: none !important;
                    opacity: 0 !important;
                }
            }
            .tab-label-container {
                max-width: 187px;
            }
            .tab-icon-overlay[pictureinpicture], 
            .tab-icon-overlay[soundplaying], 
            .tab-icon-overlay[muted], 
            .tab-icon-overlay[activemedia-blocked] {
                position: absolute !important;
                transform: translateX(calc(5px + var(--firefox-move-icon))) !important;
                width: 16px !important;
                height: 16px !important;
            }
            .tab-icon-image:not([src]):not([pinned]):not([crashed]):not([busy]):not([pictureinpicture])[selected], 
            .tab-icon-image:not([src]):not([pinned]):not([crashed]):not([busy]):not([sharing]):not([pictureinpicture]) {
                &:not([src]), &:-moz-broken {
                    margin-top: -2px;
                }
            }
            &, &:not(#vertical-tabs-newtab-button):not([selected="true"]), &:not(#vertical-tabs-newtab-button):not([selected="true"]):not([disabled="true"]):hover {
                background-color: transparent !important;
                background-image: none !important;
            }
            &:-moz-window-inactive {
                opacity: 0.5;
            }
            padding: 0 !important;
            width: 100% !important;
            --tab-collapsed-background-width: 33px !important;
        }
        .button-background,
        .tabbrowser-tab,
        #newtab-button-container {
            &, #vertical-tabs-newtab-button {
                --tab-min-height: 30px !important;
                height: 32px;
                min-height: 32px;
                min-width: 33px;
            }
        }
        > #vertical-tabs-newtab-button {
            height: 30px;
            min-height: 30px;
            sidebar-main[expanded] & {
                > .toolbarbutton-icon {
                    transform: translate(9.5px, -1px);
                }
                > .toolbarbutton-text {
                    transform: translateX(8.5px);
                }
            }
        }
        #tabbrowser-arrowscrollbox {
            width: 100% !important;
        }
        .tab-content,
        .tabbrowser-tab:is([image], [pinned]) > .tab-stack > .tab-content[attention]:not([selected]), 
        .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected]) {
            background-position: left 4.5px bottom 19.5px !important;
            .tab-icon-image {
                &:not([src]), &:-moz-broken {
                    transform: translateY(0.5px) !important;
                }
            }
        }
        .tab-icon-overlay:not([indicator-replaces-favicon]) {
            inset-inline-end: -7px;
        }
        .tab-background {
            box-shadow: none !important;
            margin: 0 0 0 0 !important;
        }
        &::after,
        &[overflow]::after {
            display: none !important;
            opacity: 0 !important;
        }
        &:has(#vertical-pinned-tabs-container .tabbrowser-tab),
        #tabbrowser-arrowscrollbox {
            &::before {
                color: var(--firefox-safari-style-button-color) !important;
                font-size: 10px;
                font-weight: 600;
                margin: 0 0 6px 6px;
                opacity: 0.5;
                width: 100%;
            }
            &:-moz-window-inactiv::before {
                opacity: 0.33;
            }
        }
        &:has(#vertical-pinned-tabs-container .tabbrowser-tab) {
            &::before {
                margin: 0 0 6px 12.5px;
            }
        }
        #vertical-pinned-tabs-container,
        #tabbrowser-arrowscrollbox {
            --tab-pinned-container-margin-inline-expanded: 0.6rem !important;
            column-gap: 0 !important;
            row-gap: 0 !important;
        }
        #vertical-pinned-tabs-container:has(.tabbrowser-tab) ~ #tabbrowser-arrowscrollbox:has(.tabbrowser-tab) {
            margin-top: 15px;
        }
        #vertical-pinned-tabs-container {
            &:not(:has(.tabbrowser-tab)) {
                position: absolute;
                opacity: 0;
            }
            max-height: inherit !important;
        }
        #vertical-pinned-tabs-container {
            .tab-content {
                justify-content: center !important;
                .tab-icon-stack {
                    transform: translateX(-1px);
                }
            }
        }
        #vertical-pinned-tabs-container,
        sidebar-main:not([expanded]) &,
        sidebar-main:not([expanded]) & #newtab-button-container,
        sidebar-main:not([expanded]) & #tabbrowser-arrowscrollbox {
            .tabbrowser-tab, #vertical-tabs-newtab-button {
                .tab-close-button,
                .tab-label-container {
                    &, &:hover {
                        display: none !important;
                    }
                }
            }
            flex-direction: row;
            flex-wrap: wrap;
        }
        sidebar-main:not([expanded]) &,
        sidebar-main:not([expanded]) & #vertical-pinned-tabs-container,
        sidebar-main:not([expanded]) & #newtab-button-container,
        sidebar-main:not([expanded]) & #tabbrowser-arrowscrollbox {
            &, .tabbrowser-tab, .tab-stack {
                max-width: 33px !important;
            }
        }
        sidebar-main:not([expanded]) & #vertical-pinned-tabs-container {
            flex-direction: column;
            align-items: center;
            padding-left: 13px;
        }
        sidebar-main {
            order: 1 !important;
        }
        sidebar-main:not([expanded]) & #vertical-tabs-newtab-button,
        sidebar-main:not([expanded]) & #tabbrowser-arrowscrollbox .tabbrowser-tab {
            margin-left: 0 !important;
        }
        sidebar-main[expanded] & {
            &:has(#vertical-pinned-tabs-container .tabbrowser-tab) {
                #main-window[lang*="en-"] &::before { content: 'Pinned Tabs'; }
                #main-window[lang*="cs-"] &::before { content: 'Pipnut karty'; }
                #main-window[lang*="de-"] &::before { content: 'Angeheftet Tabs'; }
                #main-window[lang*="el-"] &::before { content: ' '; }
                #main-window[lang*="es-"] &::before { content: 'Pestaas ancladas'; }
                #main-window[lang*="fi-"] &::before { content: 'Kiinnitetyt vlilehdet'; }
                #main-window[lang*="it-"] &::before { content: 'Pannelli fissati'; }
                #main-window[lang*="ja-"] &::before { content: ''; }
                #main-window[lang*="nl-"] &::before { content: 'Vastgemaakte tabbladen'; }
                #main-window[lang*="pl-"] &::before { content: 'Przypite karty'; }
                #main-window[lang*="ru-"] &::before { content: ' '; }
                #main-window[lang*="sl-"] &::before { content: 'Pripeti zavihki'; }
                #main-window[lang*="sv-"] &::before { content: 'Fsta flikar'; }
                #main-window[lang*="tr-"] &::before { content: 'Sabitlenmi sekmeler'; }
                #main-window[lang*="uk-"] &::before { content: ' '; }
            }
            #tabbrowser-arrowscrollbox:has(.tabbrowser-tab) {
                #main-window[lang*="en-"] &::before { content: 'Open Tabs'; }
                #main-window[lang*="cs-"] &::before { content: 'Otevt karty'; }
                #main-window[lang*="de-"] &::before { content: 'Offene Tabs'; }
                #main-window[lang*="el-"] &::before { content: ' '; }
                #main-window[lang*="es-"] &::before { content: 'Abrir pestaas'; }
                #main-window[lang*="fi-"] &::before { content: 'Avoimet vlilehdet'; }
                #main-window[lang*="it-"] &::before { content: 'Apri pannelli'; }
                #main-window[lang*="ja-"] &::before { content: ''; }
                #main-window[lang*="nl-"] &::before { content: 'Open tabbladen'; }
                #main-window[lang*="pl-"] &::before { content: 'Otwrz karty'; }
                #main-window[lang*="ru-"] &::before { content: ' '; }
                #main-window[lang*="sl-"] &::before { content: 'Odprti zavihki'; }
                #main-window[lang*="sv-"] &::before { content: 'ppna flikar'; }
                #main-window[lang*="tr-"] &::before { content: 'Sekmeleri a'; }
                #main-window[lang*="uk-"] &::before { content: ' '; }
            }
        }
        &, &[overflow] {
            border-bottom-width: 0 !important;
        }
        > #vertical-tabs-newtab-button {
            order: 2 !important;
        }
        #tabbrowser-arrowscrollbox-periphery #tabs-newtab-button {
            display: none !important;
        }
        padding-inline: 0 !important;
        padding-left: 1px !important;
        display: flex !important;
    }
    .button-background {
        --button-border-radius: 5px !important;
        border-radius: 5px !important;
        min-width: 33px;
        [src] {
            margin-left: 5px;
            margin-right: 5px;
        }
    }
    .tabbrowser-tab[usercontextid] > .tab-stack > .tab-background > .tab-context-line {
        #vertical-pinned-tabs-container &, #tabbrowser-tabs[orient="vertical"] &, & {
            margin: 0 !important;
        }
    }
    #tabbrowser-tabs[orient="vertical"]  {
        grid-gap: 0 !important;
        .tabbrowser-tab .tab-background, 
        #vertical-tabs-newtab-button {
            background-color: transparent !important;
        }
        .tabbrowser-tab .tab-background {
            transform: translateY(1px);
            max-height: 30px;
            width: calc(100% - 2px);
        }
        .tabbrowser-tab[selected="true"]:not([disabled="true"]) {
            .tab-background {
                /* Active */
                background-color: var(--button-background-color-ghost-active) !important;
            }
        }
        .tabbrowser-tab:not([selected="true"]):not([disabled="true"]):hover .tab-background, 
        #vertical-pinned-tabs-container .tabbrowser-tab:not([selected="true"]):not([disabled="true"]) .tab-background,
        #vertical-tabs-newtab-button:hover {
            /* hover */
            background-color: var(--button-background-color-ghost-hover) !important;
            max-height: 30px;
        }
        #tabbrowser-arrowscrollbox {
            padding-inline-start: 0 !important;
            padding-inline-end: 0 !important;
        }
        #vertical-pinned-tabs-container,
        sidebar-main[expanded] & #tabbrowser-arrowscrollbox  {
            padding-inline-start: var(--tab-pinned-container-margin-inline-expanded) !important;
            padding-inline-end: 0 !important;
        }
        #vertical-tabs-newtab-button {
            border-radius: 5px;
            margin: 1px 0 0 0 !important;
            margin-left: var(--tab-pinned-container-margin-inline-expanded) !important;
            max-width: calc(var(--firefox-safari-style-vertical-tab-max-width) - 14px);
        }
        .tabbrowser-tab[selected="true"]:not([disabled="true"]) {
            .tab-throbber,
            .tab-icon-image,
            sidebar-main:not([expanded]) & .tab-close-button,
            image { 
                opacity: 1 !important;
                fill: var(--firefox-safari-style-button-input-color) !important;
            }
            label { 
                color: var(--firefox-safari-style-button-input-color) !important;
            }
        }
        .tab-label-container {
            .tab-text {
                margin-top: -0.5px !important;
                margin-bottom: 0 !important;
            }
        }
        .tab-close-button {
            margin-inline-end: 4px !important;
        }
    }

    toolbarpaletteitem[place="toolbar"][id^="wrapper-customizableui-special-spring"], toolbarspring {
        max-height: 28px;
    }

    sidebar-main:not([expanded]) {
        #vertical-pinned-tabs-container {
            justify-content: center;
        }
        .button-background {
            min-height: 30px;
        }
    }
    #appcontent, #sidebar, #sidebar-box, .sidebar-panel, #tabbrowser-tabbox, .browserSidebarContainer {
        border-width: 0 !important;
        border-top-width: 0 !important;
        border-inline-start: 0 !important;
        box-shadow: none !important;
        outline: 0 !important;
    }
    #sidebar, #sidebar-box, .sidebar-panel {
        border-width: 0 !important;
        border-radius: 0 !important;
    }
    .sidebar-panel {
        background-color: transparent !important;
    }

    .tab-icon-overlay {
        &:not([crashed]) {
          &:is([soundplaying], [muted], [activemedia-blocked]) {
            background-color: transparent !important;
            border-width: 0 !important;
            border-radius: 0;
          }
        }
    }
}
